<!DOCTYPE html>
<html lang="it">
<head> â€¦ </head>
<body>
  <h1>Time Calculator CNC</h1>

  <label>
  Giri mandrino MAX (solo per torni):
  <input type="number" id="rpmMax" value="4000" min="100" step="50">
</label><br>

<button id="openBtn">Apri file ISO</button>
<p id="filePath"></p>
<button id="calcBtn" disabled>Calcola Tempo</button>
<h2>Tempo stimato: <span id="result">--</span> s</h2>
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const openBtn = document.getElementById('openBtn');
      const calcBtn = document.getElementById('calcBtn');
      const filePathP = document.getElementById('filePath');
      const resultSpan = document.getElementById('result');
      let currentFile = null;

      openBtn.addEventListener('click', async () => {
        try {
          const path = await window.api.selectFile();
          if (path) {
            currentFile = path;
            filePathP.textContent = path;
            calcBtn.disabled = false;
          }
        } catch (e) {
          console.error(e);
        }
      });

      calcBtn.addEventListener('click', async () => {
        if (!currentFile) return;
        const sec = await window.api.calcTime(currentFile);
        resultSpan.textContent = sec.toFixed(1);
      });
    });
  </script>
</body>
</html>
